{"ast":null,"code":"var _jsxFileName = \"/home/saidi/Desktop/TAYLOR+GOODS/FRONTEND/src/components/Cart/Cart.jsx\";\nimport React, { useContext } from \"react\";\nimport { MdClose } from \"react-icons/md\";\nimport { BsCartX } from \"react-icons/bs\";\nimport { Context } from \"../../utils/context\";\nimport CartItem from \"./CartItem/CartItem\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { makePaymentRequest } from \"../../utils/api\";\nimport \"./Cart.scss\";\n\nconst Cart = () => {\n  const {\n    cartItems,\n    setShowCart,\n    cartSubTotal\n  } = useContext(Context);\n  const stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\n\n  const handlePayment = async () => {\n    try {\n      const stripe = await stripePromise;\n      const res = await makePaymentRequest.post(\"/api/orders\", {\n        products: cartItems\n      });\n      await stripe.redirectToCheckout({\n        sessionId: res.data.stripeSession.id\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-panel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"opac-layer\",\n    onClick: () => setShowCart(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 21\n    }\n  }, \"Shopping Cart\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"close-btn\",\n    onClick: () => setShowCart(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(MdClose, {\n    className: \"close-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 25\n    }\n  }, \"close\"))), !cartItems.length && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"empty-cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(BsCartX, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 25\n    }\n  }, \"No products in the cart.\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"return-cta\",\n    onClick: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 25\n    }\n  }, \"RETURN TO SHOP\")), !!cartItems.length && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CartItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"subtotal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 33\n    }\n  }, \"Subtotal:\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 33\n    }\n  }, \"\\u20B9\", cartSubTotal)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"checkout-cta\",\n    onClick: handlePayment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 33\n    }\n  }, \"Checkout\"))))));\n};\n\nexport default Cart;","map":{"version":3,"sources":["/home/saidi/Desktop/TAYLOR+GOODS/FRONTEND/src/components/Cart/Cart.jsx"],"names":["React","useContext","MdClose","BsCartX","Context","CartItem","loadStripe","makePaymentRequest","Cart","cartItems","setShowCart","cartSubTotal","stripePromise","process","env","REACT_APP_STRIPE_PUBLISHABLE_KEY","handlePayment","stripe","res","post","products","redirectToCheckout","sessionId","data","stripeSession","id","err","console","log","length"],"mappings":"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","sourcesContent":["import React, { useContext } from \"react\";\nimport { MdClose } from \"react-icons/md\";\nimport { BsCartX } from \"react-icons/bs\";\nimport { Context } from \"../../utils/context\";\nimport CartItem from \"./CartItem/CartItem\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { makePaymentRequest } from \"../../utils/api\";\n\nimport \"./Cart.scss\";\n\nconst Cart = () => {\n    const { cartItems, setShowCart, cartSubTotal } = useContext(Context);\n\n    const stripePromise = loadStripe(\n        process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY\n    );\n\n    const handlePayment = async () => {\n        try {\n            const stripe = await stripePromise;\n            const res = await makePaymentRequest.post(\"/api/orders\", {\n                products: cartItems,\n            });\n            await stripe.redirectToCheckout({\n                sessionId: res.data.stripeSession.id,\n            });\n        } catch (err) {\n            console.log(err);\n        }\n    };\n\n    return (\n        <div className=\"cart-panel\">\n            <div\n                className=\"opac-layer\"\n                onClick={() => setShowCart(false)}\n            ></div>\n            <div className=\"cart-content\">\n                <div className=\"cart-header\">\n                    <span className=\"heading\">Shopping Cart</span>\n                    <span\n                        className=\"close-btn\"\n                        onClick={() => setShowCart(false)}\n                    >\n                        <MdClose className=\"close-btn\" />\n                        <span className=\"text\">close</span>\n                    </span>\n                </div>\n\n                {!cartItems.length && (\n                    <div className=\"empty-cart\">\n                        <BsCartX />\n                        <span>No products in the cart.</span>\n                        <button className=\"return-cta\" onClick={() => {}}>\n                            RETURN TO SHOP\n                        </button>\n                    </div>\n                )}\n\n                {!!cartItems.length && (\n                    <>\n                        <CartItem />\n                        <div className=\"cart-footer\">\n                            <div className=\"subtotal\">\n                                <span className=\"text\">Subtotal:</span>\n                                <span className=\"text total\">\n                                    &#8377;{cartSubTotal}\n                                </span>\n                            </div>\n                            <div className=\"button\">\n                                <button\n                                    className=\"checkout-cta\"\n                                    onClick={handlePayment}\n                                >\n                                    Checkout\n                                </button>\n                            </div>\n                        </div>\n                    </>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default Cart;"]},"metadata":{},"sourceType":"module"}