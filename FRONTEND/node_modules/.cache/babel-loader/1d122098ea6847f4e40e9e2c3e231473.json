{"ast":null,"code":"var _jsxFileName = \"/home/saidi/Desktop/TAYLOR+GOODS/FRONTEND/src/components/ProductDetails/ProductDetails.jsx\";\nimport React, { Fragment, useEffect, useState } from 'react';\nimport \"./ProductDetails.css\";\nimport Carousel from 'react-material-ui-carousel';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getProductDetails, clearErrors, newReview } from '../../actions/productAction';\nimport { addItemsToCart } from '../../actions/cartAction';\nimport ReactStars from 'react-rating-stars-component';\nimport ReviewCard from './ReviewCard';\nimport Loader from '../Loader/Loader';\nimport { useAlert } from 'react-alert';\nimport MetaData from '../layout/MetaData';\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@material-ui/core';\nimport { Rating } from '@material-ui/lab';\nimport { NEW_REVIEW_RESET } from '../../constants/productConstants';\n\nconst ProductDetails = ({\n  match\n}) => {\n  const dispatch = useDispatch();\n  const alert = useAlert();\n  const {\n    product,\n    loading,\n    error\n  } = useSelector(state => state.productDetails);\n  const {\n    success,\n    error: reviewError\n  } = useSelector(state => state.newReview);\n  useEffect(() => {\n    if (error) {\n      return alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (reviewError) {\n      return alert.error(reviewError);\n      dispatch(clearErrors());\n    }\n\n    if (success) {\n      alert.success(\"Review Submitted Successfuly\");\n      dispatch({\n        type: NEW_REVIEW_RESET\n      });\n    }\n\n    dispatch(getProductDetails(match.params.id));\n  }, [dispatch, match.params.id, error, alert, reviewError]);\n  const options = {\n    edit: false,\n    color: \"rgba(20,20,20,0.1)\",\n    activeColor: \"tomato\",\n    size: window.innerWidth < 600 ? 20 : 25,\n    value: product.ratings,\n    isHalf: true\n  };\n  const [quantity, setQuantity] = useState(1);\n  const [open, setOpen] = useState(false);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState(\"\");\n\n  const increasequantity = () => {\n    if (product.Stock <= quantity) return;\n    const qty = quantity + 1;\n    setQuantity(qty);\n  };\n\n  const decreasequantity = () => {\n    if (1 >= quantity) return;\n    const qty = quantity - 1;\n    setQuantity(qty);\n  };\n\n  const addToCartHandler = () => {\n    dispatch(addItemsToCart(match.params.id, quantity));\n    alert.success(\"Item added to Cart\");\n  };\n\n  const submitReviewTogge = () => {\n    open ? setOpen(false) : setOpen(true);\n  };\n\n  const reviewSubmitHandler = () => {\n    const myForm = new FormData();\n    myForm.set(\"rating\", rating);\n    myForm.set(\"comment\", comment);\n    myForm.set(\"productId\", match.params.id);\n    dispatch(newReview(myForm));\n    setOpen(false);\n  };\n\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MetaData, {\n    title: product.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }), loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 18\n    }\n  }) : /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ProductDetails\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Carousel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, product.images && product.images.map((item, i) => /*#__PURE__*/React.createElement(\"img\", {\n    className: \"CarouselImage\",\n    key: item.url,\n    src: item.url,\n    alt: `${i} Slide`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detailsBlock-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, product.name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, \"Product # \", product._id)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detailsBlock-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ReactStars, Object.assign({}, options, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }, \"(\", product.numOfReviews, \" Reviews)\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detailsBlock-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, `$${product.price}`), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detailBlock-3-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detailsBlock-3-1-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: decreasequantity,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, \"-\"), /*#__PURE__*/React.createElement(\"input\", {\n    readOnly: true,\n    value: quantity,\n    type: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: increasequantity,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  }, \"+\")), \" \", \" \", /*#__PURE__*/React.createElement(\"button\", {\n    disabled: product.Stock < 1 ? true : false,\n    className: \"submitReview\",\n    onClick: addToCartHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, \"Add to Cart\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, \"Status: \", \" \", /*#__PURE__*/React.createElement(\"b\", {\n    className: product.Stock < 1 ? \"redColor\" : \"greenColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, product.Stock < 1 ? \"OutOfStock\" : \"InStock\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detailsBlock-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, \"Description : \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  }, product.description)), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: submitReviewTogge,\n    className: \"submitReview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, \"Submit Review\"))), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"reviewsHeading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, \"REVIEWS\"), /*#__PURE__*/React.createElement(Dialog, {\n    \"aria-labelledby\": \"simple-dialog-title\",\n    open: open,\n    onClose: submitReviewTogge,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, \"Submit Review\"), /*#__PURE__*/React.createElement(DialogContent, {\n    className: \"submitDialog\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Rating, {\n    onChange: e => setRating(e.target.value),\n    value: rating,\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"submitDialogTextArea\",\n    cols: \"30\",\n    rows: \"5\",\n    value: comment,\n    onChange: e => setComment(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: submitReviewTogge,\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: reviewSubmitHandler,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  }, \"Submit\"))), product.reviews && product.reviews[0] ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"reviews\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }\n  }, product.reviews && product.reviews.map(review => /*#__PURE__*/React.createElement(ReviewCard, {\n    review: review,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 39\n    }\n  }))) : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"noReviews\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 5\n    }\n  }, \"No Reviews Yet\")));\n};\n\nexport default ProductDetails;","map":{"version":3,"sources":["/home/saidi/Desktop/TAYLOR+GOODS/FRONTEND/src/components/ProductDetails/ProductDetails.jsx"],"names":["React","Fragment","useEffect","useState","Carousel","useSelector","useDispatch","getProductDetails","clearErrors","newReview","addItemsToCart","ReactStars","ReviewCard","Loader","useAlert","MetaData","Button","Dialog","DialogActions","DialogContent","DialogTitle","Rating","NEW_REVIEW_RESET","ProductDetails","match","dispatch","alert","product","loading","error","state","productDetails","success","reviewError","type","params","id","options","edit","color","activeColor","size","window","innerWidth","value","ratings","isHalf","quantity","setQuantity","open","setOpen","rating","setRating","comment","setComment","increasequantity","Stock","qty","decreasequantity","addToCartHandler","submitReviewTogge","reviewSubmitHandler","myForm","FormData","set","name","images","map","item","i","url","_id","numOfReviews","price","description","e","target","reviews","review"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from 'react'\nimport \"./ProductDetails.css\";\nimport Carousel from 'react-material-ui-carousel';\nimport {useSelector, useDispatch} from 'react-redux';\nimport { getProductDetails, clearErrors, newReview } from '../../actions/productAction';\nimport {addItemsToCart} from '../../actions/cartAction';\nimport ReactStars from 'react-rating-stars-component'; \nimport ReviewCard from './ReviewCard';\nimport Loader from '../Loader/Loader';\nimport {useAlert} from 'react-alert';\nimport MetaData from '../layout/MetaData'\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@material-ui/core';\nimport { Rating } from '@material-ui/lab';\nimport { NEW_REVIEW_RESET } from '../../constants/productConstants';\n\nconst ProductDetails = ({match}) => {\n \n  const dispatch = useDispatch();\n  const alert = useAlert();\n\n  const {product, loading, error} = useSelector(state => state.productDetails)\n\n  const {success, error: reviewError} = useSelector(\n    (state) => state.newReview\n  )\n\n  useEffect(() => {\n    if(error) {\n      return alert.error(error)\n      dispatch(clearErrors())\n    }\n\n    \n      if(reviewError) {\n        return alert.error(reviewError)\n        dispatch(clearErrors())\n      }\n      if(success) {\n        alert.success(\"Review Submitted Successfuly\");\n        dispatch({type: NEW_REVIEW_RESET})\n      }\n    dispatch(getProductDetails(match.params.id))\n  }, [dispatch, match.params.id,error, alert,reviewError])\n\n\n  const options = {\n    edit: false,\n    color: \"rgba(20,20,20,0.1)\",\n    activeColor: \"tomato\",\n    size: window.innerWidth< 600 ? 20 :25,\n    value: product.ratings,\n    isHalf:true,\n}\n  const [quantity, setQuantity] = useState(1);\n  const [open, setOpen] = useState(false);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState(\"\");\n\n  const increasequantity = () => {\n    if(product.Stock <= quantity) return;\n\n    const qty = quantity + 1;\n    setQuantity(qty);\n  }\n\n  const decreasequantity = () => {\n    if(1 >= quantity) return;\n    const qty = quantity - 1;\n    setQuantity(qty);\n  }\n\n  const addToCartHandler = () => {\n    dispatch(addItemsToCart(match.params.id, quantity));\n    alert.success(\"Item added to Cart\");\n  }\n  const submitReviewTogge = () => {\n    open ? setOpen(false) : setOpen(true);\n  }\n\n  const reviewSubmitHandler = () => {\n    const myForm = new FormData();\n\n    myForm.set(\"rating\", rating);\n    myForm.set(\"comment\", comment);\n    myForm.set(\"productId\", match.params.id);\n\n    dispatch(newReview(myForm));\n\n    setOpen(false);\n  }\n\n  return (\n    <Fragment>\n      <MetaData title={product.name} />\n      {loading ? <Loader /> : (\n        <Fragment>\n        <div className='ProductDetails'>\n          <div>\n            <Carousel>\n              {product.images && product.images.map((item, i) => (\n                <img \n                 className='CarouselImage'\n                 key={item.url}\n                 src={item.url}\n                 alt={`${i} Slide`}\n                />\n              ))}\n            </Carousel>\n          </div>\n          <div>\n            <div className=\"detailsBlock-1\">\n              <h2>{product.name}</h2>\n              <p>Product # {product._id}</p>\n            </div>\n            <div className=\"detailsBlock-2\">\n              <ReactStars {...options} />\n              <span>({product.numOfReviews} Reviews)</span>\n            </div>\n            <div className=\"detailsBlock-3\">\n              <h1>{`$${product.price}`}</h1>\n              <div className=\"detailBlock-3-1\">\n                <div className=\"detailsBlock-3-1-1\">\n                  <button onClick={decreasequantity}>-</button>\n                  <input readOnly value={quantity} type=\"number\" />\n                  <button onClick={increasequantity}>+</button>\n                </div> {\" \"}\n                <button disabled={product.Stock < 1 ? true : false} className=\"submitReview\" onClick={addToCartHandler}>Add to Cart</button>\n              </div>\n              <p>\n                Status: {\" \"}\n                <b className={product.Stock < 1 ? \"redColor\":\"greenColor\"}>\n                  {product.Stock < 1 ? \"OutOfStock\" : \"InStock\"}\n                </b>\n              </p>\n            </div>\n            <div className=\"detailsBlock-4\">\n              Description : <p>{product.description}</p>\n            </div>\n            <button onClick={submitReviewTogge} className=\"submitReview\">Submit Review</button>\n          </div>\n        </div>\n        <h3 className=\"reviewsHeading\">REVIEWS</h3>\n        <Dialog\n        aria-labelledby='simple-dialog-title'\n        open={open}\n        onClose={submitReviewTogge}\n        >\n          <DialogTitle>\n            Submit Review\n          </DialogTitle>\n          <DialogContent className='submitDialog'>\n            <Rating\n            onChange={(e) => setRating(e.target.value)} value={rating} size='large' />\n            <textarea\n            className='submitDialogTextArea'\n            cols='30'\n            rows=\"5\"\n            value={comment}\n            onChange={(e) => setComment(e.target.value)}\n            ></textarea>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={submitReviewTogge} color=\"secondary\">Cancel</Button>\n            <Button onClick={reviewSubmitHandler} color=\"primary\">Submit</Button>\n          </DialogActions>\n\n        </Dialog>\n    \n  {product.reviews && product.reviews[0] ? (\n    <div className=\"reviews\">\n      {product.reviews && \n      product.reviews.map((review) => <ReviewCard review={review} />)}\n    </div>\n  ) : (\n    <p className=\"noReviews\">No Reviews Yet</p>\n  )}  \n      </Fragment>\n      )}\n    </Fragment>\n  )\n}\n\nexport default ProductDetails;\n"]},"metadata":{},"sourceType":"module"}