{"ast":null,"code":"import _slicedToArray from\"/home/saidi/Desktop/TAYLOR+GOODS/FRONTEND/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from\"react\";import\"./UpdateProfile.css\";import Loader from\"../Loader/Loader\";import MailOutlineIcon from\"@material-ui/icons/MailOutline\";import FaceIcon from\"@material-ui/icons/Face\";import{useDispatch,useSelector}from\"react-redux\";import{clearErrors,updateProfile,loadUser}from\"../../actions/userAction\";import{useAlert}from\"react-alert\";import{UPDATE_PROFILE_RESET}from\"../../constants/userConstants\";import MetaData from\"../layout/MetaData\";var UpdateProfile=function UpdateProfile(_ref){var history=_ref.history;var dispatch=useDispatch();var alert=useAlert();var _useSelector=useSelector(function(state){return state.user;}),user=_useSelector.user;var _useSelector2=useSelector(function(state){return state.profile;}),error=_useSelector2.error,isUpdated=_useSelector2.isUpdated,loading=_useSelector2.loading;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),avatar=_useState6[0],setAvatar=_useState6[1];var _useState7=useState(\"/Profile.png\"),_useState8=_slicedToArray(_useState7,2),avatarPreview=_useState8[0],setAvatarPreview=_useState8[1];var updateProfileSubmit=function updateProfileSubmit(e){e.preventDefault();var myForm=new FormData();myForm.set(\"name\",name);myForm.set(\"email\",email);myForm.set(\"avatar\",avatar);dispatch(updateProfile(myForm));};var updateProfileDataChange=function updateProfileDataChange(e){var reader=new FileReader();reader.onload=function(){if(reader.readyState===2){setAvatarPreview(reader.result);setAvatar(reader.result);}};reader.readAsDataURL(e.target.files[0]);};useEffect(function(){if(user){setName(user.name);setEmail(user.email);setAvatarPreview(user.avatar.url);}if(error){alert.error(error);dispatch(clearErrors());}if(isUpdated){alert.success(\"Profile Updated Successfully\");dispatch(loadUser());history.push(\"/account\");dispatch({type:UPDATE_PROFILE_RESET});}},[dispatch,error,alert,history,user,isUpdated]);return/*#__PURE__*/React.createElement(Fragment,null,loading?/*#__PURE__*/React.createElement(Loader,null):/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(MetaData,{title:\"Update Profile\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"updateProfileContainer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"updateProfileBox\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"updateProfileHeading\"},\"Update Profile\"),/*#__PURE__*/React.createElement(\"form\",{className:\"updateProfileForm\",encType:\"multipart/form-data\",onSubmit:updateProfileSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"updateProfileName\"},/*#__PURE__*/React.createElement(FaceIcon,null),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Name\",required:true,name:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"updateProfileEmail\"},/*#__PURE__*/React.createElement(MailOutlineIcon,null),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",placeholder:\"Email\",required:true,name:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",{id:\"updateProfileImage\"},/*#__PURE__*/React.createElement(\"img\",{src:avatarPreview,alt:\"Avatar Preview\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",name:\"avatar\",accept:\"image/*\",onChange:updateProfileDataChange})),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Update\",className:\"updateProfileBtn\"}))))));};export default UpdateProfile;","map":{"version":3,"names":["React","Fragment","useState","useEffect","Loader","MailOutlineIcon","FaceIcon","useDispatch","useSelector","clearErrors","updateProfile","loadUser","useAlert","UPDATE_PROFILE_RESET","MetaData","UpdateProfile","history","dispatch","alert","state","user","profile","error","isUpdated","loading","name","setName","email","setEmail","avatar","setAvatar","avatarPreview","setAvatarPreview","updateProfileSubmit","e","preventDefault","myForm","FormData","set","updateProfileDataChange","reader","FileReader","onload","readyState","result","readAsDataURL","target","files","url","success","push","type","value"],"sources":["/home/saidi/Desktop/TAYLOR+GOODS/FRONTEND/src/components/User/UpdateProfile.jsx"],"sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport \"./UpdateProfile.css\";\nimport Loader from \"../Loader/Loader\";\nimport MailOutlineIcon from \"@material-ui/icons/MailOutline\";\nimport FaceIcon from \"@material-ui/icons/Face\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { clearErrors, updateProfile, loadUser } from \"../../actions/userAction\";\nimport { useAlert } from \"react-alert\";\nimport { UPDATE_PROFILE_RESET } from \"../../constants/userConstants\";\nimport MetaData from \"../layout/MetaData\";\n\nconst UpdateProfile = ({ history }) => {\n  const dispatch = useDispatch();\n  const alert = useAlert();\n\n  const { user } = useSelector((state) => state.user);\n  const { error, isUpdated, loading } = useSelector((state) => state.profile);\n\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [avatar, setAvatar] = useState();\n  const [avatarPreview, setAvatarPreview] = useState(\"/Profile.png\");\n\n  const updateProfileSubmit = (e) => {\n    e.preventDefault();\n\n    const myForm = new FormData();\n\n    myForm.set(\"name\", name);\n    myForm.set(\"email\", email);\n    myForm.set(\"avatar\", avatar);\n    dispatch(updateProfile(myForm));\n  };\n\n  const updateProfileDataChange = (e) => {\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      if (reader.readyState === 2) {\n        setAvatarPreview(reader.result);\n        setAvatar(reader.result);\n      }\n    };\n\n    reader.readAsDataURL(e.target.files[0]);\n  };\n\n  useEffect(() => {\n    if (user) {\n      setName(user.name);\n      setEmail(user.email);\n      setAvatarPreview(user.avatar.url);\n    }\n\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (isUpdated) {\n      alert.success(\"Profile Updated Successfully\");\n      dispatch(loadUser());\n\n      history.push(\"/account\");\n\n      dispatch({\n        type: UPDATE_PROFILE_RESET,\n      });\n    }\n  }, [dispatch, error, alert, history, user, isUpdated]);\n  return (\n    <Fragment>\n      {loading ? (\n        <Loader />\n      ) : (\n        <Fragment>\n          <MetaData title=\"Update Profile\" />\n          <div className=\"updateProfileContainer\">\n            <div className=\"updateProfileBox\">\n              <h2 className=\"updateProfileHeading\">Update Profile</h2>\n\n              <form\n                className=\"updateProfileForm\"\n                encType=\"multipart/form-data\"\n                onSubmit={updateProfileSubmit}\n              >\n                <div className=\"updateProfileName\">\n                  <FaceIcon />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Name\"\n                    required\n                    name=\"name\"\n                    value={name}\n                    onChange={(e) => setName(e.target.value)}\n                  />\n                </div>\n                <div className=\"updateProfileEmail\">\n                  <MailOutlineIcon />\n                  <input\n                    type=\"email\"\n                    placeholder=\"Email\"\n                    required\n                    name=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                  />\n                </div>\n\n                <div id=\"updateProfileImage\">\n                  <img src={avatarPreview} alt=\"Avatar Preview\" />\n                  <input\n                    type=\"file\"\n                    name=\"avatar\"\n                    accept=\"image/*\"\n                    onChange={updateProfileDataChange}\n                  />\n                </div>\n                <input\n                  type=\"submit\"\n                  value=\"Update\"\n                  className=\"updateProfileBtn\"\n                />\n              </form>\n            </div>\n          </div>\n        </Fragment>\n      )}\n    </Fragment>\n  );\n};\n\nexport default UpdateProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}